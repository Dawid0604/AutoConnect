name: "Dashboards"

services:
  pgadmin:
    build: resources/pgadmin
    container_name: pgadmin
    environment:
      PGADMIN_DEFAULT_EMAIL: ${PGADMIN_EMAIL}
      PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_PASSWORD}

      USER_SERVER_NAME: User Service
      USER_SERVER_HOST: user-service-postgres-db
      USER_DATABASE_NAME: ${USER_MICROSERVICE_POSTGRES_DB}
      USER_DATABASE_PORT: ${USER_MICROSERVICE_POSTGRES_PORT}
      USER_DATABASE_USER: ${USER_MICROSERVICE_POSTGRES_USER}
      USER_DATABASE_PASSWORD: ${USER_MICROSERVICE_POSTGRES_PASSWORD}

      NOTIFICATION_SERVER_NAME: Notification Service
      NOTIFICATION_SERVER_HOST: notification-service-postgres-db
      NOTIFICATION_DATABASE_NAME: ${NOTIFICATION_MICROSERVICE_POSTGRES_DB}
      NOTIFICATION_DATABASE_PORT: ${NOTIFICATION_MICROSERVICE_POSTGRES_PORT}
      NOTIFICATION_DATABASE_USER: ${NOTIFICATION_MICROSERVICE_POSTGRES_USER}
      NOTIFICATION_DATABASE_PASSWORD: ${NOTIFICATION_MICROSERVICE_POSTGRES_PASSWORD}

    ports:
      - "${PGADMIN_PORT}:80"

    depends_on:
      user-service-postgres-db:
        condition: service_healthy

      notification-service-postgres-db:
        condition: service_healthy

    networks:
      - autoconnect_network

networks:
  autoconnect_network:
    driver: bridge
    name: autoconnect_network